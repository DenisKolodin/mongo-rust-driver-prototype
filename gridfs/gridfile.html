<div class='index'>

<ul>
<li><a href="#struct-gridreader">Struct <code>GridReader</code></a> - Struct for reading from GridFS</li>
<li><a href="#struct-gridwriter">Struct <code>GridWriter</code></a> - Struct for writing to GridFS</li>
<li><a href="#implementation-of-rtiowriter-for-gridwriter">Implementation <code>of rtio::Writer for GridWriter</code></a></li>
<li><a href="#implementation-for-gridwriter">Implementation <code>for GridWriter</code></a></li>
<li><a href="#implementation-of-rtioreader-for-gridreader">Implementation <code>of rtio::Reader for GridReader</code></a></li>
<li><a href="#implementation-for-gridreader">Implementation <code>for GridReader</code></a></li>
</ul>
</div>

<h2 id="struct-gridreader">Struct <code>GridReader</code></h2>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">pub</span> <span class="kw">struct</span> GridReader {
    chunks: Collection,
    files: Collection,
    length: <span class="kw">uint</span>,
    position: <span class="kw">uint</span>,
    file_id: Document,
    buf: ~[<span class="kw">u8</span>],
}</code></pre>
<p>Struct for reading from GridFS. Currently it always uses a base collection called &quot;fs&quot;.</p>
<h2 id="struct-gridwriter">Struct <code>GridWriter</code></h2>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">pub</span> <span class="kw">struct</span> GridWriter {
    chunks: Collection,
    files: Collection,
    closed: <span class="kw">bool</span>,
    chunk_size: <span class="kw">uint</span>,
    chunk_num: <span class="kw">uint</span>,
    file_id: <span class="kw">Option</span>&lt;Document&gt;,
    position: <span class="kw">uint</span>,
}</code></pre>
<p>Struct for writing to GridFS. Currently it always uses a base collection called &quot;fs&quot;.</p>
<h2 id="implementation-of-rtiowriter-for-gridwriter">Implementation of <code>rtio::Writer</code> for <code>GridWriter</code></h2>
<h3 id="method-write">Method <code>write</code></h3>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> write(&amp;<span class="kw">mut</span> <span class="kw">self</span>, d: &amp;[<span class="kw">u8</span>])</code></pre>
<p>Write the given data to the fs.chunks collection.</p>
<h3 id="method-flush">Method <code>flush</code></h3>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> flush(&amp;<span class="kw">mut</span> <span class="kw">self</span>)</code></pre>
<p>Complete a write of a document. Calling this causes document metadata to be written to the fs.files collection.</p>
<h2 id="implementation-for-gridwriter">Implementation for <code>GridWriter</code></h2>
<h3 id="method-new">Method <code>new</code></h3>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> new(db: &amp;DB) -&gt; GridWriter</code></pre>
<p>Create a new GridWriter for the given database.</p>
<h3 id="method-close">Method <code>close</code></h3>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> close(&amp;<span class="kw">mut</span> <span class="kw">self</span>) -&gt; <span class="kw">Result</span>&lt;(), MongoErr&gt;</code></pre>
<p>Close this GridWriter. Closing a GridWriter causes it to flush, and a closed writer cannot be written to.</p>
<h2 id="implementation-of-rtioreader-for-gridreader">Implementation of <code>rtio::Reader</code> for <code>GridReader</code></h2>
<h3 id="method-read">Method <code>read</code></h3>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> read(&amp;<span class="kw">mut</span> <span class="kw">self</span>, buf: &amp;<span class="kw">mut</span> [<span class="kw">u8</span>]) -&gt; <span class="kw">Option</span>&lt;<span class="kw">uint</span>&gt;</code></pre>
<p>Read data into buf.</p>
<p>The data is collected based on the query <code>db.fs.chunks.find({file_id: self.file_id})</code> (in rough notation).</p>
<p>Returns the number of bytes read.</p>
<h3 id="method-eof">Method <code>eof</code></h3>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> eof(&amp;<span class="kw">mut</span> <span class="kw">self</span>) -&gt; <span class="kw">bool</span></code></pre>
<p>Return true if there is more data that can be read.</p>
<h2 id="implementation-for-gridreader">Implementation for <code>GridReader</code></h2>
<h3 id="method-new-1">Method <code>new</code></h3>
<pre class="sourceCode rust"><code class="sourceCode rust"><span class="kw">fn</span> new(db: &amp;DB, file_id: Document) -&gt; GridReader</code></pre>
<p>Builds a new GridReader. Fails if the id given does not match any _id field in the fs.files collection.</p>
